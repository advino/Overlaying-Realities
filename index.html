<!DOCTYPE html>

<html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=.5">

<head>
  <title>WebApp Demo</title>

  <script src="webapp.js" type="text/javascript"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <!-- <script src="ARjs/awe-standard.js" type="text/javascript"></script> -->
  <!-- <script src="ARjs/awe-standard-dependancies.js" type="text/javascript"></script> -->

  <style type="text/css">

    @font-face {
      font-family: Maison Neue;
      src: url(maisonneue-medium.ttf);
      font-weight: bold;
    }

    @font-face {
      font-family: Maison Neue;
      src: url(maisonneue-mono.ttf);
      font-weight: 100;
    }

    body {
      display: flex;
      justify-content: center;
      margin-top: 50px;
    }

    #container {
      display: block;
      padding: 20px;
      border-style: solid;
      border-width: medium;
      border-color: black;
      box-shadow: 5px 7px;
      width: 75%;
      max-width: 565px;
      height: auto;

    }

    video {
      display: none;
      margin: auto;
      margin-top: 15px;
      margin-bottom: 15px;
      width: 75%;


    }

    h2 {
      font-family: Maison Neue;
      font-weight: bold;
    }

    #blurb {
      display: block;
      font-family: Maison Neue;
      font-size: 14px;
      font-weight: 100;
      line-height: 1.5;

    }

    #fullScreen {
      display: block;
      margin: auto;
      margin-top: 40px;
      padding: 10px;
      width: 75%;
      background: red;
      color: white;
      border: none;
      text-decoration: none;
      font-family: Maison Neue;
      font-weight: 100;
      font-size: 16px;

    }
  </style>

</head>

<body>


  <div id="container" style="margin: auto">
    <h2>Overlaying Realities</h2>
    <p id="blurb">
      This is the work-in-progress web app for Overlaying Realities.
      </br>
      </br>
      If you are using an iPhone, you are shit out of luck for now, unfortunately.
      If you are on Android, this app should work fine on a variety of
      OS verions.

    </br>
    </br>
       I have created an immersive experience to help the residents
       of Providence understand how climate change will affect their
       lives on an individual level. Using both AR and Physical computing
       I will be mapping the effects of Urban Heating from future climates
       onto your daily routines and behaviors. Through this mapping, I hope
       to show you just how different your life will be under the hot sun
       of a future Providence.
    </p>
    <button id="fullScreen">Start App</button>
  </div>


  <!-- Loader files for awe.js -->
  <script src="ARjs/awe-v8.js" type="text/javascript"></script>
  <script src="ARjs/awe-loader.js" type="text/javascript"></script>


<!-- Code for inserting media/AR -->
  <script>



    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;



    // DOM elements

    var fullScreen = document.getElementById('fullScreen');
    var contain = document.getElementById('container');


    // AR based Code

    fullScreen.addEventListener('click', function() {
      fullScreen.innerHTML = 'Loading...';

      window.awe.init({
        // automatically detect the device type
        device_type: awe.AUTO_DETECT_DEVICE_TYPE,
        // populate some default settings
        settings: {
        	container_id: 'body',
          fps: 30,
          default_camera_position: { x:0, y:0, z:0 },
          default_lights:[
            {
              id: 'hemisphere_light',
              type: 'hemisphere',
              color: 0xCCCCCC
            },
          ],
        },
        ready: function() {
          var d = '?_='+Date.now();

          // load js files based on capability detection then setup the scene if successful
          awe.util.require([
            {
              capabilities: ['webgl','gum'],
              files: [
                [ 'ARjs/awe-standard-dependencies.js'+d, 'ARjs/awe-standard.js'+d ], // core dependencies for this app
                ['ARjs/plugins/StereoEffect.js'+d, 'ARjs/plugins/VREffect.js'+d], // dependencies for render effects
                'ARjs/plugins/awe.rendering_effects.js'+d,
                'ARjs/plugins/awe-standard-object_clicked_or_focused.js'+d, // object click/tap handling plugin
                // 'awe.gyro.js'+d, // basic gyro handling
                // 'awe.mouse.js'+d, // basic mouse handling
              ],
              success: function() {
                // setup and paint the scene
  			        awe.setup_scene();

    						// var click_plugin = awe.plugins.view('object_clicked');
    						// if (click_plugin) {
      					// 	click_plugin.register();
      					// 	click_plugin.enable();
    						// }
    						// var gyro_plugin = awe.plugins.view('gyro');
    						// if (gyro_plugin) {
      					// 	gyro_plugin.enable();
    						// }
    						// var mouse_plugin = awe.plugins.view('gyro');
    						// if (gyro_plugin) {
      					// 	gyro_plugin.enable();
    						// }

                awe.settings.update({data:{value: 'ar'}, where:{id: 'view_mode'}})
    						var render_effects_plugin = awe.plugins.view('render_effects');
    						if (render_effects_plugin) {
      						render_effects_plugin.enable();
    						}
                // 
                // Some code to make the canvas fullscreen when clicked.
                // This is primarily working on Andriod.

                var canvasElement = document.getElementById('awe_canvas-0');

                canvasElement.addEventListener('click', function() {
                  canvasElement.webkitRequestFullScreen();
                });

                // setup some code to handle when an object is clicked/tapped


  			        // add some points of interest (poi) for each of the compass points
  			        awe.pois.add({ id:'north', position: { x:125, y:10, z:-200 } });
                awe.pois.add({id: 'text', position: { x:125, y:10, z:-195}});

  			        // add projections to each of the pois
  			        awe.projections.add({
  			          id:'n',
  			          geometry:{ shape:'plane', width: 100, height: 50},
                  rotation:{ x:0, y:-10, z:0 },
  			          material:{
  			            type: 'phong',
  			            color:0xFFFFFF,
                    fog: true,
  			          },
  			        }, { poi_id: 'north' });

                awe.projections.add({
                  'geometry':
                  {
                    'font-url': "MaisonNeueMono.js",
                    'parameters': {
                      'height': 10,
                      'size': 80,
                    },
                  'shape': "text",
                  'text': "Body Temp: 97",
                },
                'material': {
                  'type': 'phong',
                  'color': 0X000000,
                },
              }, {poi_id: 'text'});



              },
            },
            { // else create a fallback
              capabilities: [],
              files: [],
              success: function() {
                document.body.innerHTML = '<p>This demo currently requires a standards compliant mobile browser.';
                return;
              },
            },
          ]);



        }
      });
    });



  </script>


</body>



</html>
