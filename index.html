<!DOCTYPE html>

<html>
<meta charset="utf-8">

<head>
<title>WebApp Demo</title>

<script src="webapp.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<style>

body{
  display: flex;
  justify-content: center;
  margin-top: 50px;
}

#container {
  display: block;
  padding: 10px;
  border-style: solid;
  border-width: medium;
  border-color: black;
  box-shadow: 5px 7px;
  width: 50%;
  height: auto;

}

video {
  display: block;
  margin: auto;
  width: 75%;


}

#fullScreen {
  display: block;
  margin: auto;
  padding: 10px;
  width: 75%;
  background: red;
  color: white;
  border: none;
  text-decoration: none;

}

</style>

</head>

<body translate="no">


<div id="container" style="margin: auto">
  <button id="fullScreen">Start App</button>
</div>


<script>

navigator.getUserMedia  = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
var video = document.createElement('video');
video.style.width =  document.width + 'px';
video.style.height = document.height + 'px';
video.setAttribute('autoplay', '');
video.setAttribute('muted', '');
video.setAttribute('playsinline', '');

var facingMode = "environment";

var constraints = {
  audio: false,
  video: {
    facingMode: facingMode
  }
}

navigator.mediaDevices.getUserMedia(constraints).then(function success(stream) {
  video.srcObject = stream;
});

document.body.appendChild(video);


var fullScreen = document.getElementById('fullScreen');
var contain = document.getElementById('container');



fullScreen.addEventListener('click', function(){

  // var video = document.createElement('video');
  // video.style.width =  document.width + 'px';
  // video.style.height = document.height + 'px';
  // video.setAttribute('autoplay', '');
  // video.setAttribute('muted', '');
  // video.setAttribute('playsinline', '');
  //
  // var facingMode = "environment";
  //
  // var constraints = {
  //   audio: false,
  //   video: {
  //     facingMode: facingMode
  //   }
  // }
  //
  // navigator.mediaDevices.getUserMedia(constraints).then(function success(stream) {
  // 	video.srcObject = stream;
  // });
  //
  // document.body.appendChild(video);

  video.webkitEnterFullScreen();


  document.addEventListener("webkitfullscreenchange", function() {

    console.log(document.webkitIsFullScreen);
    if(document.webkitIsFullScreen == false) {
      video.remove();
    }

  });
});



</script>
</body>



</html>
