<!DOCTYPE html>

<html>
<meta charset="utf-8">

<head>
<title>WebApp Demo</title>

<script src="webapp.js" type="text/javascript"></script>

</head>

<body>


<div style="margin: auto"	>
	<video id="camera"></video>
</div>
<script>
navigator.getUserMedia  = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;

var video = document.getElementById('camera');

video.style.width =  document.width + 'px';
video.style.height = document.height + 'px';
video.setAttribute('autoplay', '');
video.setAttribute('muted', '');
video.setAttribute('playsinline', '');

var facingMode = "environment";

var constraints = {
  audio: false,
  video: {
    facingMode: facingMode
  }
}

navigator.mediaDevices.getUserMedia(constraints).then(function success(stream) {
	video.srcObject = stream;
});

document.body.appendChild(video);

video.addEventListener('click', function() {
  if (facingMode == "user") {
    facingMode = "environment";
  } else {
    facingMode = "user";
  }

  constraints = {
    audio: false,
    video: {
      facingMode: facingMode
    }
  }

  navigator.mediaDevices.getUserMedia(constraints).then(function success(stream) {
	  video.srcObject = stream;
  });
});


</script>
</body>



</html>
